---
title: "Review and Study Case on Forecasting Hierarchical or Grouped Time Series"
author: "Uriel Martinez & José Zarate"
format: html
editor: visual
---

```{r}

knitr::opts_chunk$set(echo = FALSE)


## ID_F0 --> This function aim to install and load libraries required.
rm(list = ls())

instalar <- function(paquete) {
  if (!require(paquete,character.only = TRUE, quietly = TRUE,
               warn.conflicts = FALSE)) {
    install.packages(as.character(paquete), dependecies = TRUE,
                     repos = "http://cran.us.r-project.org")
    library(paquete, character.only = TRUE, quietly = TRUE,
            warn.conflicts = FALSE)
  }
}
    
## *******   Defining required libraries to install and load   *******

## Use this vector to indicate libraries to load.
paquetes <- c("tidyverse", "lubridate", "glmnet", "fpp3", "bsts")
installed.packages("Diagrammer")
invisible(lapply(paquetes, instalar))

## Load piping files and review of working libraries

#source("../src/utils/utils.R", encoding = 'UTF-8')

```

\*\* Introducción

Un aspecto relevante para los tomadores de decisión es el hecho de poder tener información confiable y consistente, de tal forma que las proyecciones o valores resultantes sean razonables. Cuand se realizan proyecciones en series de tiempo, nos enfrentamos a un cojunto de elementos que debemos atacar de forma secuencial y sencillla para poder derterminar los patrones naturales que emergen de la serie, tales como tendencia, estacionalidad en diversas fases,


### DATABASE
TO DESCRIBE SOURCE, DATABASE AND PURPOSE


```{r}

data <- read.csv('data_kaggle/train.csv', header = T)

```


# Data Cleaning Process

```{r}

data_play <- data

# categorical columns
data_play <- data_play |> select(-row_id) |> 
  mutate(date = str_replace(date, pattern = "-[0-9]+$", replacement = "-01")) |> 
  mutate(across(all_of("date"), ~ ymd(.x))) |>
  mutate(dateym = yearmonth(date)) |> relocate(dateym, .before = starts_with("date")) |> 
  group_by(dateym, country) |> 
  summarize(total_sold_by_country = sum(num_sold))

data_play |> filter(country=="Poland")
```






```{r}

ggplot(data_play, aes(x = dateym, y = total_sold_by_country)) +
  geom_line() + geom_jitter() + facet_wrap(~ country)

```

### COMPORTAMIENTO DE LA SERIE DE TIEMPO

Integrar una especia de EDA pero de serie de tiempo, esto es,
analizar tendenci, ciclicidad etc.






